---
title: 诚实（而勇敢）的面对故障时间
layout: post
category: cn
---

从最近的几个月看，果合的服务稳定性可以说非常糟糕。看看我们出现的服务当机、数据准确性、SDK 广告展示等问题，每一个都足以让开发者一气之下转向其它的服务。包括我在内，几乎每个果合用户支持团队的成员都在各种时间接到用户的电话。很多开发者非常熟悉的 Ron 同学，曾经在凌晨 2 点钟被开发者电话催醒，才发现我们的自主广告服务故障影响了开发者的广告投放，他的第一反应是火速联系产品和技术团队，连夜修复问题。第二天早上，每个人都疲惫不堪。在两周前的那次故障中，我和工程师们在办公室守到凌晨 2 点。到晚上 10 点的时候，一位刚刚开始使用的果合服务的开发者发邮件询问修复的情况，我直接提供了我的手机号码，之后我们就用电话和短信交流，互相通报服务回复的进度。

移动互联网的增长速度令人瞠目结舌，我们所服务的移动广告流量如同“曲棍球棒”一般成长。与创业的兴奋感而来的，是沉重的商业责任。贝尔的电话系统是世界上最可靠的系统之一，他们有 99.999% 的无故障率，也就是说，平均每年只有不到 5 分钟的时间出现问题。对于实行“六西格玛”质量管理的公司而言，他们认为这样的水平还不够，低于百万分之三的故障率才是黄金标准。这样的质量标准对我而言，曾经是非常遥远的事情，但对于提供与盈利直接相关的商业服务却是根本中的根本。

要达到这样的质量要求，需要经历一条陡峭的学习曲线。如果不是用户对果合的宽容，我们不会有机会在讨论更多创新的可能。在这条学习曲线上，这个团队学习到的是更加谨慎的面对和解决服务质量的难题。最近的一次故障中，我们发现是“频次控制”这个看似简单的功能造成了频繁的数据库读写，从而导致服务故障。在此之后，我们花费了大量的精力恢复服务，恢复数据，并用 [Redis](http://redis.io) 来替代原有的数据库读写架构。本周内，扩容后的服务将重新上线，为用户继续提供强大的“频次控制”功能。我们的开发者关系团队整理了数十页和开发者的聊天记录，打印出来，分析用户提出的问题和抱怨，并汇总给产品团队。

这支团队和行业中其它的团队相比，一个突出的特点是更为年轻。尽管我们中的很多人都意识到广告管理服务最重要的特性就是稳定，但是当把这个需求实现的时候，我们都没有意识到“不出问题”这件事的难度。特别是当我们试图提供越来越复杂的控制选项的时候，果合就越发变成各个部分之间互相作用和影响的系统，出现问题的概率和解决问题的难度都快速的增加。这让我想起一支我曾经非常喜爱的英超球队阿森纳，这支平均年龄在全英超最低的球队有着最漂亮的进攻，但是却在防守和板凳宽度上漏洞百出。这是一个需要我们快速学习、快速吸取教训来解决的问题，在这之前，需要我们诚实并勇敢的面对发生故障的时间。

PS - 本文的题目和开头参考了 37signals 的博客：[Let's get honest about uptime](http://37signals.com/svn/posts/3067-lets-get-honest-about-uptime)。

PS2 - 原文发表在 [果合团队博客](http://blog.guohead.com/2012/04/lets-be-honest-about-downtime/)。